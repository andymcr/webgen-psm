[comment encoding = UTF-8 /]
[module site-new(
	'http://www.cs.man.ac.uk/mdsd/2010/Jsf')]
[import uk::ac::man::cs::mdsd::web::m2t::core::config::files/]
[import uk::ac::man::cs::mdsd::jsf::m2t::kohana::common::fileInformation/]

[template public generateNewPage(jsfModel : JsfModel)]
[file(jsfModel.viewDirectory().concat('/site-new').concat(jsfModel.executableExtension()), false)]
<!DOCTYPE html>
<html lang="en"[if (jsfModel.ajaxTechnology = AjaxTechnologies::AngularJS)] data-ng-app="[jsfModel.siteName/]"[/if]>
<head>
 <meta charset="UTF-8"/>
 <meta name="viewport" content="width=device-width, initial-scale=1">
[if (not jsfModel.metaDescription.oclIsUndefined())]
 <meta name="description" content="[jsfModel.metaDescription/]">
[/if]
 <title>[jsfModel.siteTitle/]: <?php echo __($title); ?></title>
 <?php echo HTML::style('css/default.css') . PHP_EOL; ?>
 <?php echo HTML::style('css/non-print.css', array(
		'media' => 'not print'
	)) . PHP_EOL; ?>
 <?php echo HTML::style('css/print.css', array(
		'media' => 'print'
	)) . PHP_EOL; ?>
 <?php echo HTML::style('css/custom.css') . PHP_EOL; ?>
[if (not jsfModel.textEditorURL.oclIsUndefined())]
 <script type="text/javascript" src="[jsfModel.textEditorURL/]"></script>
[/if]
<?php foreach ($scripts as $script) { ?>
 <script type="text/javascript" src="<?php echo $script; ?>"></script>
<?php } ?>
</head>
<body id="page" class="framed">
<header>
 <h1 id="banner"><?php echo __('[jsfModel.siteTitle/]'); ?></h1>
 <?php echo $topbar; ?>
</header>
<?php if (isset($sidebar)) echo $sidebar; ?>
<main <?php if (isset($style_class)) { echo 'class="' . $style_class . '" '; } ?>id="content">
<?php if (!empty($page_message)) { ?>
 <p><?php echo __($page_message); ?></p>
<?php } ?>
<?php
	foreach ($unitViews as $unitView) {
		echo $unitView;
	}
?>
</main>
<div class="clear"></div>
<footer>
 <p>[jsfModel.copyrightText/]</p>
</footer>
</body>
</html>
[/file]
[/template]
